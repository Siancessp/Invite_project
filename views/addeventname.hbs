{{> header}}

{{> sidebar}}

<div class="content-wrapper">

<section class="content-header">
<div class="container-fluid">
<div class="row mb-2">
<div class="col-sm-6">
<h1>Event Category</h1>
</div>
<div class="col-sm-6">
<ol class="breadcrumb float-sm-right">
</ol>
</div>
</div>
</div>
</section>

<section class="content">
<div class="container-fluid">
<div class="row">

<div class="col-md-12">

<div class="card card-primary">
<div class="card-header">
<h3 class="card-title">Event Category</h3>
</div>
<form action="/insertcategory" method="POST" enctype="multipart/form-data">
    <div class="card-body">
        <div class="form-group">
            <label for="categoryname">Category Name</label>
            <input type="text" class="form-control" name="categoryname" id="categoryname" placeholder="">
        </div>
    </div>
    <div class="card-footer">
        <button type="submit" class="btn btn-primary">Submit</button>
    </div>
</form>
</div>
</div>

</div>
</section>

</div>

{{> footer}}

<script>
    // Assume this is your client-side JavaScript code

// Function to handle form submission
async function submitForm(event) {
    event.preventDefault(); // Prevent default form submission

    try {
        const token = getToken(); // Retrieve token from storage
        const form = event.target;
        const formData = new FormData(form);

        const response = await fetch('/insertcategory', {
            method: 'POST',
            headers: {
                'Authorization': 'Bearer ' + token // Include token in the request headers
            },
            body: formData
        });

        if (response.ok) {
            // Form submission successful, handle response
            console.log('Form submitted successfully');
        } else {
            // Handle error response
            console.error('Form submission failed');
        }
    } catch (error) {
        console.error('Error:', error);
    }
}

// Function to retrieve token from storage (e.g., local storage)
function getToken() {
    // Retrieve the token from storage (e.g., local storage)
    return localStorage.getItem('token');
}

// Attach submit event listener to the form
const form = document.querySelector('form');
form.addEventListener('submit', submitForm);

</script>